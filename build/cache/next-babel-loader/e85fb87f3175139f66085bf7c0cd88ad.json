{"ast":null,"code":"var _jsxFileName = \"C:\\\\newlife\\\\newSite\\\\my-app\\\\component\\\\component\\\\photo.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\n\nfunction Photo({\n  id\n}) {\n  const {\n    0: blob,\n    1: setBlob\n  } = useState(null);\n  const {\n    0: uncount,\n    1: setUncount\n  } = useState(false);\n  useEffect(() => {\n    getPhoto();\n    return () => {\n      setUncount(true);\n\n      if (blob) {\n        URL.revokeObjectURL(blob);\n      }\n    };\n  }, [id]);\n\n  const getPhoto = async () => {\n    try {\n      const QURL = process.env.DATA_URL + 'getComponent/getPhoto/' + id;\n      let res = await fetch(QURL);\n\n      if (res.ok) {\n        let result = await res.blob();\n\n        if (!uncount) {\n          setBlob(result);\n        }\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(React.Fragment, null, blob && __jsx(\"img\", {\n    src: URL.createObjectURL(blob),\n    alt: \"\\u7167\\u7247\",\n    className: \"jsx-3166343992\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 25\n    }\n  }), __jsx(_JSXStyle, {\n    id: \"3166343992\",\n    __self: this\n  }, \"img.jsx-3166343992{width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxuZXdsaWZlXFxuZXdTaXRlXFxteS1hcHBcXGNvbXBvbmVudFxcY29tcG9uZW50XFxwaG90by5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrQzBCLEFBR3lDLFdBQ1oiLCJmaWxlIjoiQzpcXG5ld2xpZmVcXG5ld1NpdGVcXG15LWFwcFxcY29tcG9uZW50XFxjb21wb25lbnRcXHBob3RvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LHt1c2VFZmZlY3QsdXNlU3RhdGV9IGZyb20gJ3JlYWN0J1xyXG5cclxuZnVuY3Rpb24gUGhvdG8oIHsgaWQgfSApIHtcclxuICAgIGNvbnN0IFtibG9iLHNldEJsb2JdID0gdXNlU3RhdGUobnVsbCk7ICAgIFxyXG4gICAgY29uc3QgW3VuY291bnQsc2V0VW5jb3VudF0gPSB1c2VTdGF0ZShmYWxzZSk7ICAgICAgICBcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgZ2V0UGhvdG8oKSAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgc2V0VW5jb3VudCh0cnVlKTtcclxuICAgICAgICAgICAgICBpZihibG9iKXtcclxuICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgXHJcbiAgICAgICAgICB9XHJcbiAgICB9LFtpZF0pXHJcbiAgICBjb25zdCBnZXRQaG90byA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFFVUkwgPSBwcm9jZXNzLmVudi5EQVRBX1VSTCsnZ2V0Q29tcG9uZW50L2dldFBob3RvLycraWQ7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaChRVVJMKVxyXG4gICAgICAgICAgICBpZihyZXMub2spe1xyXG4gICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPWF3YWl0IHJlcy5ibG9iKCk7XHJcbiAgICAgICAgICAgICAgICAgaWYoIXVuY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgc2V0QmxvYihyZXN1bHQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICg8PiBcclxuXHJcbiAgICAgICAgICAgICAgeyBibG9iICYmIDxpbWcgc3JjPXsgVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKX0gYWx0PVwi54Wn54mHXCIvPiB9IFxyXG4gICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgICAgPC8+KVxyXG4gICAgICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaG90b1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\newlife\\\\\\\\newSite\\\\\\\\my-app\\\\\\\\component\\\\\\\\component\\\\\\\\photo.js */\"));\n}\n\nexport default Photo;","map":{"version":3,"sources":["C:/newlife/newSite/my-app/component/component/photo.js"],"names":["React","useEffect","useState","Photo","id","blob","setBlob","uncount","setUncount","getPhoto","URL","revokeObjectURL","QURL","process","env","DATA_URL","res","fetch","ok","result","err","console","log","createObjectURL"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;;AAEA,SAASC,KAAT,CAAgB;AAAEC,EAAAA;AAAF,CAAhB,EAAyB;AACrB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAMC;AAAN,MAAiBJ,QAAQ,CAAC,IAAD,CAA/B;AACA,QAAM;AAAA,OAACK,OAAD;AAAA,OAASC;AAAT,MAAuBN,QAAQ,CAAC,KAAD,CAArC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACVQ,IAAAA,QAAQ;AACR,WAAO,MAAM;AACTD,MAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,UAAGH,IAAH,EAAQ;AACNK,QAAAA,GAAG,CAACC,eAAJ,CAAoBN,IAApB;AACD;AACJ,KALD;AAML,GARQ,EAQP,CAACD,EAAD,CARO,CAAT;;AASA,QAAMK,QAAQ,GAAG,YAAY;AACvB,QAAI;AACF,YAAMG,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,GAAqB,wBAArB,GAA8CX,EAA3D;AACA,UAAIY,GAAG,GAAG,MAAMC,KAAK,CAACL,IAAD,CAArB;;AACA,UAAGI,GAAG,CAACE,EAAP,EAAU;AACL,YAAIC,MAAM,GAAE,MAAMH,GAAG,CAACX,IAAJ,EAAlB;;AACA,YAAG,CAACE,OAAJ,EAAa;AACTD,UAAAA,OAAO,CAACa,MAAD,CAAP;AACH;AACL;AACF,KATD,CASC,OAAMC,GAAN,EAAU;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACF;AAEN,GAdD;;AAgBA,SAAQ,4BAEIf,IAAI,IAAI;AAAK,IAAA,GAAG,EAAGK,GAAG,CAACa,eAAJ,CAAoBlB,IAApB,CAAX;AAAsC,IAAA,GAAG,EAAC,cAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFZ;AAAA;AAAA;AAAA,wvEAAR;AAUH;;AAED,eAAeF,KAAf","sourcesContent":["import React,{useEffect,useState} from 'react'\r\n\r\nfunction Photo( { id } ) {\r\n    const [blob,setBlob] = useState(null);    \r\n    const [uncount,setUncount] = useState(false);        \r\n\r\n    useEffect(() => {\r\n          getPhoto()          \r\n          return () => {\r\n              setUncount(true);\r\n              if(blob){\r\n                URL.revokeObjectURL(blob);\r\n              }              \r\n          }\r\n    },[id])\r\n    const getPhoto = async () => {\r\n          try {\r\n            const QURL = process.env.DATA_URL+'getComponent/getPhoto/'+id;            \r\n            let res = await fetch(QURL)\r\n            if(res.ok){\r\n                 let result =await res.blob();\r\n                 if(!uncount) {\r\n                     setBlob(result);                                      \r\n                 }\r\n            }\r\n          }catch(err){\r\n             console.log(err);\r\n          }\r\n              \r\n    }\r\n\r\n    return (<> \r\n\r\n              { blob && <img src={ URL.createObjectURL(blob)} alt=\"照片\"/> } \r\n              <style jsx>{`\r\n                            img {\r\n                              width:100%;                   \r\n                            }\r\n                `}</style>\r\n          </>)\r\n        \r\n}\r\n\r\nexport default Photo\r\n"]},"metadata":{},"sourceType":"module"}