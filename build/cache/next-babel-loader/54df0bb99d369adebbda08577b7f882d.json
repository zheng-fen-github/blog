{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport Item from \"./item\";\nvar Pagination = React.memo(function (_ref) {\n  var codeList = _ref.codeList,\n      setCode = _ref.setCode,\n      type = _ref.type;\n\n  var _useState = useState(2),\n      count = _useState[0],\n      setCount = _useState[1];\n\n  var _useState2 = useState([]),\n      List = _useState2[0],\n      setList = _useState2[1];\n\n  useEffect(function () {\n    window.addEventListener(\"scroll\", function () {\n      //     设置滚动事件\n      scrollE();\n    });\n    return function () {\n      return window.removeEventListener(\"scroll\", scrollE);\n    };\n  }, [List]);\n  useEffect(function () {\n    setList(codeList.slice(0, 8)); //     设置初始数\n  }, [codeList]);\n\n  var addList = function addList() {\n    setList(codeList.slice(0, count * 8));\n    setCount(function (pre) {\n      return pre += 1;\n    });\n  };\n\n  var eventId = useRef();\n\n  var scrollE = function scrollE() {\n    //滚动事件定义\n    if (eventId.current) return;\n    eventId.current = setTimeout(function () {\n      try {\n        var scrollCount = Math.round(window.pageYOffset + window.innerHeight);\n\n        if (scrollCount >= document.documentElement.scrollHeight - 2) {\n          document.getElementById(\"loadmore\").click();\n        }\n      } catch (err) {\n        console.log(err);\n      }\n\n      eventId.current = null;\n    }, 500);\n  };\n\n  var typevalue = useCallback(type === \"JS\" ? \"js\" : type === \"React\" ? \"react\" : type === \"CSS\" ? \"css\" : type === \"Node\" ? \"node\" : null, [type]);\n  return __jsx(React.Fragment, null, List.map(function (e) {\n    return __jsx(Item, {\n      setCode: setCode,\n      type: typevalue,\n      key: e._id,\n      message: e\n    });\n  }), __jsx(\"button\", {\n    onClick: addList,\n    id: \"loadmore\",\n    className: \"d-none\"\n  }, \"click\"));\n});\nexport default Pagination;","map":null,"metadata":{},"sourceType":"module"}