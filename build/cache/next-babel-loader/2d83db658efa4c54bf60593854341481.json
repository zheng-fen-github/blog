{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useRef, useState } from \"react\";\nimport styles from \"./minNav.module.css\";\n\nconst MinNav = ({\n  setState,\n  setLoad,\n  setType,\n  list,\n  oldState,\n  setPage\n}) => {\n  let dom = useRef();\n\n  const updateShow = async e => {\n    try {\n      let activeDom = e.target.closest(\"li\");\n      if (!activeDom) return;\n      let oldDom = dom.current;\n      if (oldDom) oldDom.classList.remove(\"seled\");\n      let type = activeDom.children[0].textContent;\n\n      if (type === \"All\") {\n        setState(oldState.data);\n        setPage(oldState.count);\n        setType(null);\n        return;\n      }\n\n      activeDom.classList.add(\"seled\"); //选中的元素添加样式\n\n      dom.current = activeDom;\n      setState([]); //搜索指定文章\n\n      setLoad(true);\n      let data = await gotData(type);\n\n      if (Array.isArray(data.data)) {\n        setState(data.data);\n        setPage(data.count);\n        setType(type);\n      }\n\n      setLoad(false);\n    } catch (err) {\n      if (err) console.log(err);\n      console.log(\"列表元素样式切换失败\");\n    }\n  };\n\n  const OpenSearch = async e => {\n    e.stopPropagation();\n    setSeatchstatus(true);\n  };\n\n  const gotData = async type => {\n    try {\n      const RURL = process.env.DATA_URL + \"addArticle/gotArticle/type/\" + type + \"?page=1\";\n      let res = await fetch(RURL);\n      let result = await res.json();\n      return result;\n    } catch (err) {\n      console.log(err);\n      return {\n        err\n      };\n    }\n  };\n\n  const {\n    0: SeatchValue,\n    1: setSeatchValue\n  } = useState(\"\");\n\n  const setValue = e => setSeatchValue(e.target.value);\n\n  const {\n    0: Seatchstatus,\n    1: setSeatchstatus\n  } = useState(false);\n\n  const searchEvent = async () => {\n    if (SeatchValue === \"\") return;\n    const RURL = process.env.DATA_URL + \"addArticle/gotArticle/search/\" + SeatchValue;\n    setState([]);\n    setLoad(true);\n    let res = await fetch(RURL);\n    let result = await res.json();\n    setState(result.data);\n    setPage(result.length);\n    setType(\"\");\n    setLoad(false);\n    console.log(result);\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-2872888197\" + \" \" + \"row min-nav-ctn m-0\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2872888197\" + \" \" + \"col-12 .col-md-11 min-nav  p-5 pffset-0 \"\n  }, __jsx(\"ul\", {\n    onClick: updateShow,\n    className: \"jsx-2872888197\" + \" \" + \"d-flex m-0\"\n  }, list.map((type, index) => __jsx(\"li\", {\n    key: index,\n    className: \"jsx-2872888197\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-2872888197\"\n  }, type))), __jsx(\"li\", {\n    className: \"jsx-2872888197\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-2872888197\"\n  }, \"All\")), __jsx(\"li\", {\n    onClick: OpenSearch,\n    className: \"jsx-2872888197\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-2872888197\"\n  }, __jsx(\"i\", {\n    className: \"jsx-2872888197\" + \" \" + \"iconfont icon-search\"\n  }))))), __jsx(\"div\", {\n    className: \"jsx-2872888197\" + \" \" + `searchCtn ${Seatchstatus ? \"openSearchCtn\" : \"\"}`\n  }, __jsx(\"input\", {\n    type: \"text\",\n    value: SeatchValue,\n    onInput: setValue,\n    onChange: setValue,\n    className: \"jsx-2872888197\"\n  }), __jsx(\"button\", {\n    type: \"button\",\n    onClick: searchEvent,\n    className: \"jsx-2872888197\"\n  }, \"\\u641C\\u7D22\"), __jsx(\"button\", {\n    type: \"button\",\n    onClick: () => setSeatchstatus(false),\n    className: \"jsx-2872888197\" + \" \" + \"close-search\"\n  }, __jsx(\"svg\", {\n    t: \"1591706026501\",\n    class: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    version: \"1.1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"p-id\": \"3269\",\n    width: \"20\",\n    height: \"20\",\n    className: \"jsx-2872888197\"\n  }, __jsx(\"path\", {\n    d: \"M571.7 514.1l164.9-164.9c16.3-16.3 16.3-43.1 0-59.4-16.3-16.3-43.1-16.3-59.4 0L512.3 454.7 347.4 289.8c-16.3-16.3-43.1-16.3-59.4 0-16.3 16.3-16.3 43.1 0 59.4l164.9 164.9L288 679c-16.3 16.3-16.3 43.1 0 59.4 16.3 16.3 43.1 16.3 59.4 0l164.9-164.9 164.9 164.9c16.3 16.3 43.1 16.3 59.4 0 16.3-16.3 16.3-43.1 0-59.4L571.7 514.1z\",\n    \"p-id\": \"3270\",\n    className: \"jsx-2872888197\"\n  })))), __jsx(_JSXStyle, {\n    id: \"2872888197\"\n  }, [\".min-nav.jsx-2872888197{color:white;background:black;position:relative;z-index:10;}\", \".searchCtn.jsx-2872888197{width:50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:aqua;margin:20px auto 0 auto;box-shadow:0 0 6px rgba(0,0,0,0.1);-webkit-transform:translateY(-200%);-ms-transform:translateY(-200%);transform:translateY(-200%);-webkit-transition:0.5s;transition:0.5s;}\", \".openSearchCtn.jsx-2872888197{-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}\", \".searchCtn.jsx-2872888197 input.jsx-2872888197{-webkit-flex:1;-ms-flex:1;flex:1;font-size:2rem;padding:1rem;border:2px solid black;}\", \".searchCtn.jsx-2872888197 button.jsx-2872888197{color:white;background-color:black;border:none;padding:1rem 2rem;text-align:center;}\", \".searchCtn.jsx-2872888197 .close-search.jsx-2872888197{background-color:white;}\", \".searchCtn.jsx-2872888197 .close-search.jsx-2872888197:hover{background-color:black;}\", \"@media (max-width:960px){.searchCtn.jsx-2872888197 input.jsx-2872888197{font-size:4rem;}.searchCtn.jsx-2872888197{width:80%;}}\", \"ul.jsx-2872888197{list-style:none;}\", \"li.jsx-2872888197{-webkit-flex:1;-ms-flex:1;flex:1;cursor:pointer;-webkit-transition:0.4s;transition:0.4s;text-align:center;}\", \"li.jsx-2872888197:hover,li.seled.jsx-2872888197{opacity:0.5;-webkit-transform:translateY(-25%);-ms-transform:translateY(-25%);transform:translateY(-25%);}\", \"h3.jsx-2872888197{font-size:2.5rem;text-align:center;}\", \"i.jsx-2872888197{font-size:2.5rem;}\", \"i.active.jsx-2872888197{color:#133d93;}\", \"@media (max-width:980px){.min-nav.jsx-2872888197{-webkit-transform:translateY(00%);-ms-transform:translateY(00%);transform:translateY(00%);}}\", \"@media (max-width:1100px){.search-input.jsx-2872888197 input.jsx-2872888197{font-size:1.2rem;}}\", \"@media (max-width:800px){h3.jsx-2872888197{font-size:2rem;}}\", \"@media (max-width:400px){h3.jsx-2872888197{font-size:1rem;}}\"]));\n};\n\nexport default MinNav;","map":null,"metadata":{},"sourceType":"module"}