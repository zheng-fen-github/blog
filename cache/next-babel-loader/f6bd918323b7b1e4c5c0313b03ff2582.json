{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useRef } from 'react';\n\nvar MinNav = function MinNav(_ref) {\n  var setState = _ref.setState,\n      setLoad = _ref.setLoad,\n      setType = _ref.setType,\n      list = _ref.list,\n      oldState = _ref.oldState,\n      setPage = _ref.setPage;\n  var dom = useRef();\n\n  var updateShow = function updateShow(e) {\n    var activeDom, oldDom, type, data;\n    return _regeneratorRuntime.async(function updateShow$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            activeDom = e.target.closest('li');\n\n            if (activeDom) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 4:\n            oldDom = dom.current;\n            if (oldDom) oldDom.classList.remove('seled');\n            type = activeDom.children[0].textContent;\n\n            if (!(type === 'All')) {\n              _context.next = 12;\n              break;\n            }\n\n            setState(oldState.data);\n            setPage(oldState.count);\n            setType(null);\n            return _context.abrupt(\"return\");\n\n          case 12:\n            activeDom.classList.add('seled'); //选中的元素添加样式            \n\n            dom.current = activeDom;\n            setState([]); //搜索指定文章           \n\n            setLoad(true);\n            _context.next = 18;\n            return _regeneratorRuntime.awrap(gotData(type));\n\n          case 18:\n            data = _context.sent;\n\n            if (Array.isArray(data.data)) {\n              setState(data.data);\n              setPage(data.count);\n              setType(type);\n            }\n\n            setLoad(false);\n            _context.next = 27;\n            break;\n\n          case 23:\n            _context.prev = 23;\n            _context.t0 = _context[\"catch\"](0);\n            if (_context.t0) console.log(_context.t0);\n            console.log('列表元素样式切换失败');\n\n          case 27:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 23]], Promise);\n  };\n\n  var searchEvent = function searchEvent(e) {\n    var actionDom, searchDom, _dom, value, data, dom;\n\n    return _regeneratorRuntime.async(function searchEvent$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            e.stopPropagation();\n            actionDom = e.target.closest('li');\n            searchDom = document.querySelector('i.active');\n\n            if (!searchDom) {\n              _context2.next = 13;\n              break;\n            }\n\n            _dom = document.querySelector('input[name=\"search\"]');\n            value = _dom.value[0].toUpperCase() + _dom.value.slice(1);\n            setLoad(true);\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(gotData(value));\n\n          case 9:\n            data = _context2.sent;\n\n            if (Array.isArray(data.data)) {\n              setState(data.data);\n              setPage(data.count);\n              setType(value);\n              _dom.value = '';\n              searchDom.classList.remove('active');\n              actionDom.click();\n            }\n\n            setLoad(false);\n            return _context2.abrupt(\"return\");\n\n          case 13:\n            dom = document.querySelector('.search-input.focus');\n\n            if (dom) {\n              dom.classList.remove('focus');\n              actionDom.classList.remove('seled');\n            } else {\n              dom = document.querySelector('.search-input');\n              dom.classList.add('focus');\n            }\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var gotData = function gotData(type) {\n    var RURL, res, result;\n    return _regeneratorRuntime.async(function gotData$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            RURL = process.env.DATA_URL + 'addArticle/gotArticle/type/' + type + '?page=1';\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(fetch(RURL));\n\n          case 4:\n            res = _context3.sent;\n            _context3.next = 7;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 7:\n            result = _context3.sent;\n            return _context3.abrupt(\"return\", result);\n\n          case 11:\n            _context3.prev = 11;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n            return _context3.abrupt(\"return\", {\n              err: _context3.t0\n            });\n\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n\n  var InputSearchEvent = function InputSearchEvent(e) {\n    var value = e.target.value;\n    var dom = document.querySelector('.iconfont.icon-search');\n\n    if (value) {\n      dom.classList.add('active');\n    } else {\n      dom.classList.remove('active');\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-269564655\" + \" \" + 'row m-0'\n  }, __jsx(\"div\", {\n    className: \"jsx-269564655\" + \" \" + \"col-12 .col-md-11 min-nav  p-5 pffset-0 \"\n  }, __jsx(\"ul\", {\n    onClick: updateShow,\n    className: \"jsx-269564655\" + \" \" + 'd-flex m-0'\n  }, list.map(function (type, index) {\n    return __jsx(\"li\", {\n      key: index,\n      className: \"jsx-269564655\"\n    }, __jsx(\"h3\", {\n      className: \"jsx-269564655\"\n    }, type));\n  }), __jsx(\"li\", {\n    className: \"jsx-269564655\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-269564655\"\n  }, \"All\")), __jsx(\"li\", {\n    onClick: searchEvent,\n    className: \"jsx-269564655\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-269564655\"\n  }, __jsx(\"i\", {\n    className: \"jsx-269564655\" + \" \" + 'iconfont icon-search'\n  })))), __jsx(\"div\", {\n    className: \"jsx-269564655\" + \" \" + \"row  search-input  mx-0\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"search\",\n    placeholder: \"Type\",\n    onInput: InputSearchEvent,\n    className: \"jsx-269564655\"\n  }))), __jsx(_JSXStyle, {\n    id: \"269564655\"\n  }, [\".min-nav.jsx-269564655{color:white;background:black;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);position:relative;}\", \".search-input.jsx-269564655{background:black;position:absolute;top:0;right:-100%;-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%);-webkit-transition:.5s;transition:.5s;padding:2rem 4rem;z-index:20;}\", \".search-input.focus.jsx-269564655{right:15%;}\", \".search-input.jsx-269564655 input.jsx-269564655{width:100%;margin:0 auto;font-size:2.5rem;text-align:center;}\", \"ul.jsx-269564655{list-style:none;}\", \"li.jsx-269564655{-webkit-flex:1;-ms-flex:1;flex:1;cursor:pointer;-webkit-transition:.4s;transition:.4s;text-align:center;}\", \"li.jsx-269564655:hover,li.seled.jsx-269564655{opacity:0.5;-webkit-transform:translateY(-25%);-ms-transform:translateY(-25%);transform:translateY(-25%);}\", \"h3.jsx-269564655{font-size:2.5rem;text-align:center;}\", \"i.jsx-269564655{font-size:2.5rem;}\", \"i.active.jsx-269564655{color:#133d93;}\", \"@media (max-width:980px){.min-nav.jsx-269564655{-webkit-transform:translateY(00%);-ms-transform:translateY(00%);transform:translateY(00%);}}\", \"@media (max-width:1100px){.search-input.jsx-269564655 input.jsx-269564655{font-size:1.2rem;}}\", \"@media (max-width:800px){h3.jsx-269564655{font-size:2rem;}}\", \"@media (max-width:400px){h3.jsx-269564655{font-size:1rem;}}\"]));\n};\n\nexport default MinNav;","map":null,"metadata":{},"sourceType":"module"}