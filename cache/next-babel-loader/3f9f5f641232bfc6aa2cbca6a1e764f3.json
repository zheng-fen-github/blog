{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Load from '../public/loading';\n\nvar Index = function Index(_ref) {\n  var openEvent = _ref.openEvent;\n  useEffect(function () {\n    //自动输入账号\n    var account = localStorage.getItem('user-account');\n\n    if (account) {\n      var input = document.querySelector(\"input[name='account']\");\n      input.value = account;\n      document.querySelector(\"input[name='password']\").focus();\n    }\n  }, []);\n\n  var submitEv = function submitEv(e) {\n    var data, res, result;\n    return _regeneratorRuntime.async(function submitEv$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            data = new FormData(e.target);\n            setLoading(true);\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(fetch('http://localhost:4040/login', {\n              method: 'POST',\n              body: data\n            }));\n\n          case 6:\n            res = _context.sent;\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 9:\n            result = _context.sent;\n\n            if (res.ok) {\n              localStorage.setItem('user-account', data.get('account'));\n              document.documentElement.style.background = '#f7f7f7';\n              openEvent(result);\n            } else {\n              setLoading(false);\n              alert(result);\n            }\n\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](3);\n            console.log(_context.t0);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 13]], Promise);\n  };\n\n  var _useState = useState(false),\n      Loading = _useState[0],\n      setLoading = _useState[1];\n\n  return __jsx(\"div\", {\n    className: \"jsx-1419307597\" + \" \" + 'row m-0'\n  }, __jsx(\"div\", {\n    className: \"jsx-1419307597\" + \" \" + \"main-root shadow-sm\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1419307597\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1419307597\" + \" \" + \"animation col-12 d-flex align-items-center justify-content-center \"\n  }, Loading ? __jsx(Load, {\n    color: \"#97cad9\"\n  }) : __jsx(\"i\", {\n    className: \"jsx-1419307597\" + \" \" + 'iconfont icon-suo'\n  })), __jsx(\"form\", {\n    onSubmit: submitEv,\n    className: \"jsx-1419307597\" + \" \" + \"form-root col-12\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-1419307597\" + \" \" + 'title my-5'\n  }, \"Login\"), __jsx(\"label\", {\n    htmlFor: \"account\",\n    className: \"jsx-1419307597\" + \" \" + 'col-12 h3 my-4'\n  }, \"Account\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"account\",\n    id: \"account\",\n    autoFocus: true,\n    required: true,\n    className: \"jsx-1419307597\" + \" \" + 'w-100'\n  }), __jsx(\"label\", {\n    htmlFor: \"password\",\n    className: \"jsx-1419307597\" + \" \" + 'col-12 h3 my-4'\n  }, \"Password\"), __jsx(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    id: \"password\",\n    required: true,\n    className: \"jsx-1419307597\" + \" \" + 'w-100'\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-1419307597\" + \" \" + 'my-5 h2 shadow-sm'\n  }, \"LOGIN\")))), __jsx(_JSXStyle, {\n    id: \"1419307597\"\n  }, [\".main-root.jsx-1419307597{width:480px;position:fixed;top:50%;left:50%;border-radius:20px;overflow:hidden;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:white;}\", \".animation.jsx-1419307597{height:200px;background:#fafeff;}\", \".form-root.jsx-1419307597{padding:10%;padding-top:0;}\", \"i.jsx-1419307597{font-size:60px;color:#97cad9;}\", \"input.jsx-1419307597{font-size:3rem;border-radius:20px;border:solid #e5e5e5 2px;padding:1rem;}\", \"label.jsx-1419307597{margin:0;padding:0;color:#d5d6d9;}\", \"button.jsx-1419307597{width:100%;padding:1rem;font-size:3rem;background:#f3fcfe;border:none;color:#97cad9;font-weight:700;border-radius:10px;-webkit-transition:.2s;transition:.2s;}\", \"button.jsx-1419307597:hover{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);}\", \"h1.jsx-1419307597{color:#97cad9;}\"]));\n};\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}