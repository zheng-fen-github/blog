{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport Head from \"next/head\";\nimport Nav from \"../component/photo/nav\";\nimport MinNav from \"../component/photo/min-nav\";\nimport Item from \"../component/photo/item\";\nimport fetch from \"node-fetch\";\nimport Router from \"next/router\";\n\nconst Photo = ({\n  data\n}) => {\n  const {\n    0: showData,\n    1: setshowData\n  } = useState(data);\n  const AllData = useRef();\n  AllData.current = data;\n\n  const filterEvent = value => {\n    if (value === 0) return setshowData(AllData.current);\n    let newData = AllData.current.filter(e => {\n      let PhotoTime = +new Date(Number(e.createTime));\n      let liveTime = Date.now();\n\n      if (liveTime - PhotoTime >= 1000 * 60 * 60 * 24 * value) {\n        return e;\n      }\n    });\n    setshowData(newData);\n  };\n\n  const {\n    0: routerStatus,\n    1: setRouterStatus\n  } = useState(false); // 路由变化事件\n\n  const handleRouteChange = url => {\n    setRouterStatus(true);\n  };\n\n  Router.events.on(\"routeChangeStart\", handleRouteChange);\n\n  const fontsizeEvent = () => {\n    let style = document.documentElement.style;\n\n    if (window.innerWidth < 960) {\n      style.fontSize = \"6px\";\n    } else {\n      style.fontSize = \"10px\";\n    }\n  };\n\n  useEffect(() => {\n    fontsizeEvent();\n    window.addEventListener(\"resize\", () => {\n      fontsizeEvent();\n    });\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-102223895\"\n  }, \"Create Next App\"), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css\",\n    integrity: \"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh\",\n    crossorigin: \"anonymous\",\n    className: \"jsx-102223895\"\n  }), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"//at.alicdn.com/t/font_1748919_jonwjrvk6jq.css\",\n    className: \"jsx-102223895\"\n  }), __jsx(\"title\", {\n    className: \"jsx-102223895\"\n  }, \" \\u56FE\\u7247\\u6536\\u85CF \")), __jsx(\"div\", {\n    className: \"jsx-102223895\" + \" \" + \"container-fluid\"\n  }, __jsx(\"nav\", {\n    className: \"jsx-102223895\"\n  }, __jsx(Nav, null)), showData.map(e => __jsx(Item, _extends({\n    key: e._id\n  }, e))), showData.length === 0 && __jsx(\"h1\", {\n    className: \"jsx-102223895\" + \" \" + \"text-center mt-5\"\n  }, \" \\u6CA1\\u6709\\u76F8\\u5173\\u5185\\u5BB9 \"), __jsx(MinNav, {\n    filter: filterEvent\n  }), routerStatus && __jsx(\"div\", {\n    className: \"jsx-102223895\" + \" \" + \"loadAnima\"\n  }, \" \")), __jsx(_JSXStyle, {\n    id: \"680210942\"\n  }, [\"*,body{margin:0;padding:0;box-sizing:border-box;}\", \"html{font-size:10px;}\", \".container-fluid{padding:0;}\"]), __jsx(_JSXStyle, {\n    id: \"2958252256\"\n  }, [\".loadAnima.jsx-102223895{position:fixed;left:0;top:0;right:0;bottom:0;background:black;-webkit-animation:Loading-jsx-102223895 2s 10;animation:Loading-jsx-102223895 2s 10;z-index:9999;}\", \"@-webkit-keyframes Loading-jsx-102223895{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}\", \"@keyframes Loading-jsx-102223895{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}\"]));\n};\n\nexport async function getServerSideProps() {\n  const RURL = process.env.DATA_URL + \"addphoto/photos\";\n  let req = await fetch(RURL);\n  let data = await req.json();\n  return {\n    props: {\n      data\n    }\n  };\n}\nexport default Photo;","map":null,"metadata":{},"sourceType":"module"}