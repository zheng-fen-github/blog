{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\newlife\\\\newSite\\\\my-app\\\\component\\\\article\\\\comment.js\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\n\nvar Comment = function Comment(_ref) {\n  var message = _ref.message,\n      id = _ref.id;\n  useEffect(function () {\n    //获取用户信息\n    var userId = localStorage.getItem('user-id');\n    var userName = localStorage.getItem('user-name');\n\n    if (!userId) {\n      console.log('one');\n      userId = 'youke' + Date.now();\n      localStorage.setItem('user-id', userId);\n    }\n\n    if (!userName) {\n      console.log('one');\n      userName = '游客' + String(Date.now()).slice(-5);\n      localStorage.setItem('user-name', userName);\n    }\n\n    setUserName(userName);\n  }, []);\n\n  var _useState = useState(null),\n      userName = _useState[0],\n      setUserName = _useState[1];\n\n  var changeUserName = function changeUserName(e) {\n    //用户自定义名字\n    var value = e.target.value;\n    setUserName(value);\n    localStorage.setItem('user-name', userName);\n  };\n\n  var submitEvent = function submitEvent(e) {\n    var data, QURL, res, result;\n    return _regeneratorRuntime.async(function submitEvent$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            e.preventDefault();\n            data = new FormData(e.target);\n            QURL = process.env.DATA_URL + 'addArticle/articleComment/' + id;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(fetch(QURL, {\n              method: 'POST',\n              body: data\n            }));\n\n          case 6:\n            res = _context.sent;\n\n            if (!res.ok) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 10:\n            result = _context.sent;\n            setState(result);\n            _context.next = 16;\n            break;\n\n          case 14:\n            alert('添加出错，服务器去看妹子了。');\n            console.log(error);\n\n          case 16:\n            _context.next = 21;\n            break;\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 18]], Promise);\n  };\n\n  var inputAutoHeight = function inputAutoHeight(e) {\n    var dom = e.target; // 内容高度自动适应                    \n\n    dom.style.height = dom.scrollHeight > dom.offsetHeight ? dom.scrollHeight + 10 + 'px' : dom.offsetHeight + 'px';\n  };\n\n  var _useState2 = useState(message.slice(0, 3)),\n      state = _useState2[0],\n      setState = _useState2[1]; //评论列表\n\n\n  var domList = state.map(function (item) {\n    return __jsx(\"div\", {\n      className: \"col-12\",\n      key: item.createTime,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, __jsx(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 20\n      }\n    }, item.username + ' : ' + item.message)));\n  });\n  return __jsx(\"form\", {\n    onSubmit: submitEvent,\n    className: \"jsx-2920962868\" + \" \" + 'row comment m-0 p-0 justify-content-center',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2920962868\" + \" \" + \"col-10 col-lg-8 \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2920962868\" + \" \" + \"row justify-content-between \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-2920962868\" + \" \" + 'comment-item m-0 py-3',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, message.length, \" Comments\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    value: userName ? userName : '',\n    onInput: changeUserName,\n    onChange: changeUserName,\n    id: \"username\",\n    className: \"jsx-2920962868\" + \" \" + \"px-4 usename text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    className: \"jsx-2920962868\" + \" \" + \"row mt-5 align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, __jsx(\"img\", {\n    src: \"images/site_05.jpg\",\n    alt: \"\",\n    className: \"jsx-2920962868\" + \" \" + 'col-auto',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 20\n    }\n  }), __jsx(\"textarea\", {\n    type: \"text\",\n    name: \"message\",\n    id: \"comment\",\n    onInput: inputAutoHeight,\n    className: \"jsx-2920962868\" + \" \" + 'col px-4 py-2',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 20\n    }\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-2920962868\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 20\n    }\n  }, __jsx(\"i\", {\n    className: \"jsx-2920962868\" + \" \" + 'iconfont icon-cloud-upload col-auto',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      padding: '20px 80px'\n    },\n    className: \"jsx-2920962868\" + \" \" + \"row comment-list justify-content-center align-items-center position-relative\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 16\n    }\n  }, message.length > 0 ? domList : __jsx(\"h3\", {\n    className: \"jsx-2920962868\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 54\n    }\n  }, \" Be the first to comment\\u3002 \"), __jsx(\"h4\", {\n    onClick: function onClick() {\n      return setState(message);\n    },\n    className: \"jsx-2920962868\" + \" \" + 'position-absolute look-more',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 20\n    }\n  }, \"look more\"))), __jsx(_JSXStyle, {\n    id: \"2920962868\",\n    __self: _this\n  }, \".comment.jsx-2920962868{padding:10rem 0;}h2.jsx-2920962868{font-weight:700;}.look-more.jsx-2920962868{right:70px;top:10px;color:#007bff;cursor:pointer;}i.jsx-2920962868{font-size:40px;cursor:pointer;-webkit-transition:.2s;transition:.2s;}i.jsx-2920962868:hover{color:#007bff;}.col-8.jsx-2920962868>.row.jsx-2920962868:nth-child(1){border-bottom:2px solid #eaeaea;}img.jsx-2920962868{height:40px;border-radius:50%;}.comment-item.jsx-2920962868{border-bottom:2px solid black;position:relative;top:2px;}.comment-list.jsx-2920962868{min-height:20vh;border-bottom:2px solid #eaeaea;}input.jsx-2920962868,textarea.jsx-2920962868{font-size:2rem;font-weight:500;}input[name='username'].jsx-2920962868{border:none;}button.jsx-2920962868{background:none;border:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxuZXdsaWZlXFxuZXdTaXRlXFxteS1hcHBcXGNvbXBvbmVudFxcYXJ0aWNsZVxcY29tbWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE4RnlCLEFBRzZDLEFBR0QsQUFJTCxBQU1JLEFBS0QsQUFHa0IsQUFJcEIsQUFJa0IsQUFLZixBQUlBLEFBS0gsQUFHSSxXQXRDUCxDQWtCUyxBQWtCckIsRUF6QkEsQ0FMa0IsQUF5QkMsQ0F0Q2xCLEFBSUQsQUE4QmtDLEFBWW5CLElBdENFLFFBdUNqQixFQWpDa0IsQUFZbEIsQUFHcUIsQ0FVckIsQ0FqQkEsRUFia0IsY0FxQlAsQUFLWCxDQXpCQSxPQXFCQSxZQWhCQSIsImZpbGUiOiJDOlxcbmV3bGlmZVxcbmV3U2l0ZVxcbXktYXBwXFxjb21wb25lbnRcXGFydGljbGVcXGNvbW1lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgLHsgdXNlRWZmZWN0ICx1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xyXG5cclxuY29uc3QgQ29tbWVudCA9ICh7bWVzc2FnZSxpZH0pID0+IHsgICAgIFxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHsgICAgICAgICAgICAgICAgICAgIC8v6I635Y+W55So5oi35L+h5oGvXHJcbiAgICAgICAgbGV0IHVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyLWlkJyk7XHJcbiAgICAgICAgbGV0IHVzZXJOYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXItbmFtZScpO1xyXG4gICAgICAgIGlmKCF1c2VySWQpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb25lJyk7XHJcbiAgICAgICAgICAgICAgIHVzZXJJZCAgPSAneW91a2UnK0RhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyLWlkJyx1c2VySWQpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgaWYoIXVzZXJOYW1lKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ29uZScpO1xyXG4gICAgICAgICAgICAgdXNlck5hbWUgPSAn5ri45a6iJytTdHJpbmcoRGF0ZS5ub3coKSkuc2xpY2UoLTUpO1xyXG4gICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXItbmFtZScsdXNlck5hbWUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgc2V0VXNlck5hbWUodXNlck5hbWUpXHJcblxyXG4gICAgfSxbXSlcclxuICAgIGNvbnN0IFt1c2VyTmFtZSwgc2V0VXNlck5hbWVdID0gdXNlU3RhdGUobnVsbClcclxuICAgIGNvbnN0IGNoYW5nZVVzZXJOYW1lID0gKGUpID0+IHsgICAgICAgICAgICAgICAgICAgICAgIC8v55So5oi36Ieq5a6a5LmJ5ZCN5a2XXHJcbiAgICAgICAgbGV0IHZhbHVlID0gZS50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgc2V0VXNlck5hbWUodmFsdWUpXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXItbmFtZScsdXNlck5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN1Ym1pdEV2ZW50ID0gYXN5bmMgKGUpID0+IHsgICAgICAgICAgICAgICAgICAgIC8v5o+Q5Lqk5LqL5Lu2ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YShlLnRhcmdldCk7ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgUVVSTCA9IHByb2Nlc3MuZW52LkRBVEFfVVJMICsgJ2FkZEFydGljbGUvYXJ0aWNsZUNvbW1lbnQvJytpZDtcclxuICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaCggUVVSTCx7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBib2R5OmRhdGEsXHJcbiAgICAgICAgICAgICAgICB9KSAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYocmVzLm9rKSB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCAgcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZShyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXsgICBcclxuICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmt7vliqDlh7rplJnvvIzmnI3liqHlmajljrvnnIvlprnlrZDkuobjgIInKSBcclxuICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9Y2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9ICAgICAgXHJcbiB9ICBcclxuICAgIGNvbnN0IGlucHV0QXV0b0hlaWdodCA9IChlKSA9PiB7XHJcbiAgICAgICAgbGV0IGRvbSA9IGUudGFyZ2V0IDsgICAgICAgICAgICAgLy8g5YaF5a656auY5bqm6Ieq5Yqo6YCC5bqUICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICBkb20uc3R5bGUuaGVpZ2h0ID0gZG9tLnNjcm9sbEhlaWdodCA+IGRvbS5vZmZzZXRIZWlnaHQgPyBkb20uc2Nyb2xsSGVpZ2h0KzEwKydweCc6IGRvbS5vZmZzZXRIZWlnaHQrJ3B4JztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKG1lc3NhZ2Uuc2xpY2UoMCwzKSkgIC8v6K+E6K665YiX6KGoXHJcblxyXG4gICAgbGV0IGRvbUxpc3QgPSBzdGF0ZS5tYXAoaXRlbSA9PiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTJcIiBrZXk9e2l0ZW0uY3JlYXRlVGltZX0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgIDxoMz5cclxuICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS51c2VybmFtZSArICcgOiAnICsgaXRlbS5tZXNzYWdlfVxyXG4gICAgICAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICBcclxuICAgICkpXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxmb3JtIGNsYXNzTmFtZT0ncm93IGNvbW1lbnQgbS0wIHAtMCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJyBvblN1Ym1pdD17c3VibWl0RXZlbnR9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC0xMCBjb2wtbGctOCBcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9J2NvbW1lbnQtaXRlbSBtLTAgcHktMyc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmxlbmd0aH0gQ29tbWVudHMgXHJcbiAgICAgICAgICAgICAgICAgICAgPC9oMj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlcm5hbWVcIiB2YWx1ZT17dXNlck5hbWU/dXNlck5hbWU6Jyd9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgb25JbnB1dD17Y2hhbmdlVXNlck5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17Y2hhbmdlVXNlck5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZD1cInVzZXJuYW1lXCIgY2xhc3NOYW1lPVwicHgtNCB1c2VuYW1lIHRleHQtY2VudGVyXCIvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBtdC01IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJpbWFnZXMvc2l0ZV8wNS5qcGdcIiBjbGFzc05hbWU9J2NvbC1hdXRvJyBhbHQ9XCJcIi8+XHJcbiAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgdHlwZT1cInRleHRcIiBuYW1lPSdtZXNzYWdlJyBpZD0nY29tbWVudCcgY2xhc3NOYW1lPSdjb2wgcHgtNCBweS0yJyBvbklucHV0PXtpbnB1dEF1dG9IZWlnaHR9Lz4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb25mb250IGljb24tY2xvdWQtdXBsb2FkIGNvbC1hdXRvJz5cclxuICAgICAgICAgICAgICAgICAgICA8L2k+XHJcbiAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgY29tbWVudC1saXN0IGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyIHBvc2l0aW9uLXJlbGF0aXZlXCIgc3R5bGU9e3twYWRkaW5nOicyMHB4IDgwcHgnfX0+XHJcbiAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5sZW5ndGggPiAwID8gZG9tTGlzdCA6PGgzID4gQmUgdGhlIGZpcnN0IHRvIGNvbW1lbnTjgIIgPC9oMz5cclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J3Bvc2l0aW9uLWFic29sdXRlIGxvb2stbW9yZScgb25DbGljaz17KCkgPT4gc2V0U3RhdGUobWVzc2FnZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgIGxvb2sgbW9yZVxyXG4gICAgICAgICAgICAgICAgICAgPC9oND4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPHN0eWxlIGpzeD4ge2BcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC5jb21tZW50IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOjEwcmVtIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGgyIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OjcwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmxvb2stbW9yZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDo3MHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOjEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjojMDA3YmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOnBvaW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6NDBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjpwb2ludGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjouMnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaTpob3ZlciB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjojMDA3YmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2wtOD4ucm93Om50aC1jaGlsZCgxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZWFlYWVhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1nIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDo0MHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czo1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbW1lbnQtaXRlbSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOjJweCBzb2xpZCBibGFjaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOjJweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29tbWVudC1saXN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDoyMHZoOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZWFlYWVhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ICx0ZXh0YXJlYXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZToycmVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6NTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFtuYW1lPSd1c2VybmFtZSddIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjpub25lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b257XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOm5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6bm9uZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgfVxyXG4gICAgICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29tbWVudFxyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\newlife\\\\\\\\newSite\\\\\\\\my-app\\\\\\\\component\\\\\\\\article\\\\\\\\comment.js */\"));\n};\n\nexport default Comment;","map":{"version":3,"sources":["C:/newlife/newSite/my-app/component/article/comment.js"],"names":["React","useEffect","useState","Comment","message","id","userId","localStorage","getItem","userName","console","log","Date","now","setItem","String","slice","setUserName","changeUserName","e","value","target","submitEvent","preventDefault","data","FormData","QURL","process","env","DATA_URL","fetch","method","body","res","ok","json","result","setState","alert","error","inputAutoHeight","dom","style","height","scrollHeight","offsetHeight","state","domList","map","item","createTime","username","length","padding"],"mappings":"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","sourcesContent":["import React ,{ useEffect ,useState } from 'react'\r\n\r\nconst Comment = ({message,id}) => {     \r\n    useEffect(() => {                    //获取用户信息\r\n        let userId = localStorage.getItem('user-id');\r\n        let userName = localStorage.getItem('user-name');\r\n        if(!userId){\r\n            console.log('one');\r\n               userId  = 'youke'+Date.now();\r\n               localStorage.setItem('user-id',userId);\r\n        } \r\n        if(!userName){\r\n            console.log('one');\r\n             userName = '游客'+String(Date.now()).slice(-5);\r\n             localStorage.setItem('user-name',userName);\r\n         }\r\n        setUserName(userName)\r\n\r\n    },[])\r\n    const [userName, setUserName] = useState(null)\r\n    const changeUserName = (e) => {                       //用户自定义名字\r\n        let value = e.target.value;\r\n        setUserName(value)\r\n        localStorage.setItem('user-name',userName);\r\n    }\r\n\r\n    const submitEvent = async (e) => {                    //提交事件                \r\n        try {\r\n                e.preventDefault();            \r\n                let data = new FormData(e.target);             \r\n                const QURL = process.env.DATA_URL + 'addArticle/articleComment/'+id;\r\n                let res = await fetch( QURL,{\r\n                    method:'POST',\r\n                    body:data,\r\n                })                     \r\n                if(res.ok) {                \r\n                    let result = await  res.json();\r\n                    setState(result)\r\n                }else{   \r\n                   alert('添加出错，服务器去看妹子了。') \r\n                   console.log(error);\r\n                }\r\n           }catch(err) {\r\n                console.log(err);\r\n            }      \r\n }  \r\n    const inputAutoHeight = (e) => {\r\n        let dom = e.target ;             // 内容高度自动适应                    \r\n        dom.style.height = dom.scrollHeight > dom.offsetHeight ? dom.scrollHeight+10+'px': dom.offsetHeight+'px';\r\n    }\r\n\r\n    const [state, setState] = useState(message.slice(0,3))  //评论列表\r\n\r\n    let domList = state.map(item => (\r\n        <div className=\"col-12\" key={item.createTime}>\r\n            <div className=\"row\">                                \r\n                   <h3>\r\n                       {item.username + ' : ' + item.message}\r\n                   </h3>\r\n            </div>                        \r\n        </div>\r\n       \r\n    ))\r\n    return (\r\n        <form className='row comment m-0 p-0 justify-content-center' onSubmit={submitEvent}>\r\n            <div className=\"col-10 col-lg-8 \">\r\n                <div className=\"row justify-content-between \">\r\n                    <h2 className='comment-item m-0 py-3'>\r\n                        {message.length} Comments \r\n                    </h2>\r\n                    <input type=\"text\" name=\"username\" value={userName?userName:''} \r\n                      onInput={changeUserName}\r\n                      onChange={changeUserName}\r\n                      id=\"username\" className=\"px-4 usename text-center\"/>\r\n                </div>\r\n                <div className=\"row mt-5 align-items-center\">\r\n                   <img src=\"images/site_05.jpg\" className='col-auto' alt=\"\"/>\r\n                   <textarea type=\"text\" name='message' id='comment' className='col px-4 py-2' onInput={inputAutoHeight}/>                   \r\n                   <button type=\"submit\">\r\n                    <i className='iconfont icon-cloud-upload col-auto'>\r\n                    </i>\r\n                   </button>\r\n                    \r\n                                       \r\n                </div>\r\n               <div className=\"row comment-list justify-content-center align-items-center position-relative\" style={{padding:'20px 80px'}}>\r\n                   {\r\n                       message.length > 0 ? domList :<h3 > Be the first to comment。 </h3>\r\n                   }\r\n                   <h4 className='position-absolute look-more' onClick={() => setState(message)}>\r\n                       look more\r\n                   </h4>                   \r\n               </div>\r\n            </div>\r\n            <style jsx> {`\r\n                         .comment {\r\n                             padding:10rem 0;\r\n                         }\r\n                        h2 {\r\n                            font-weight:700;\r\n\r\n                        }\r\n                        .look-more {\r\n                            right:70px;\r\n                            top:10px;\r\n                            color:#007bff;\r\n                            cursor:pointer;\r\n                        }\r\n                        i {\r\n                            font-size:40px;\r\n                            cursor:pointer;\r\n                            transition:.2s;\r\n                        }\r\n                        i:hover {\r\n                            color:#007bff;\r\n                        }\r\n                        .col-8>.row:nth-child(1) {\r\n                            border-bottom:2px solid #eaeaea;\r\n                            \r\n                        }\r\n                        img {\r\n                            height:40px;\r\n                            border-radius:50%;\r\n                        }\r\n                        .comment-item {\r\n                            border-bottom:2px solid black;\r\n                            position:relative;\r\n                            top:2px;\r\n                        }\r\n                        .comment-list {\r\n                           min-height:20vh;                           \r\n                           border-bottom:2px solid #eaeaea;\r\n                        }\r\n                        input ,textarea{\r\n                            font-size:2rem;\r\n                            font-weight:500;\r\n                        }\r\n\r\n                        input[name='username'] {\r\n                            border:none;                            \r\n                        }\r\n                        button{\r\n                            background:none;\r\n                            border:none;\r\n                        }\r\n                        `}\r\n            </style>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Comment\r\n"]},"metadata":{},"sourceType":"module"}