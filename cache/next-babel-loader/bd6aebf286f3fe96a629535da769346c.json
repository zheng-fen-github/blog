{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport Head from \"next/head\";\nimport fetch from \"node-fetch\";\nimport Router from \"next/router\";\nimport Nav from \"../component/public/nav\";\nimport Author from \"../component/article/author\";\nimport ArtContent from \"../component/article/articleContent\";\nimport About from \"../component/article/about\";\nimport Comment from \"../component/article/comment\";\nimport Footer from \"../component/home/footer\";\n\nconst Home = ({\n  data\n}) => {\n  const fontsizeEvent = () => {\n    let style = document.documentElement.style;\n\n    if (window.innerWidth < 960) {\n      style.fontSize = \"6px\";\n    } else {\n      style.fontSize = \"10px\";\n    }\n  };\n\n  useEffect(() => {\n    if (!data) {\n      Router.replace(\"/404\");\n    }\n\n    fontsizeEvent();\n    window.addEventListener(\"resize\", () => {\n      fontsizeEvent();\n    });\n  }, []);\n  const {\n    0: state,\n    1: setState\n  } = useState(data);\n  const {\n    0: routerStatus,\n    1: setRouterStatus\n  } = useState(false); // 路由变化事件\n\n  const handleRouteChange = url => {\n    setRouterStatus(true);\n  };\n\n  Router.events.on(\"routeChangeStart\", handleRouteChange);\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css\",\n    integrity: \"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh\",\n    crossorigin: \"anonymous\",\n    className: \"jsx-4169290636\"\n  }), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"//at.alicdn.com/t/font_1748919_piihixc593j.css\",\n    className: \"jsx-4169290636\"\n  }), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/logo.jpg\",\n    type: \"image/x-icon\",\n    className: \"jsx-4169290636\"\n  }), __jsx(\"title\", {\n    className: \"jsx-4169290636\"\n  }, \" \\u6587\\u7AE0 \")), __jsx(\"div\", {\n    className: \"jsx-4169290636\" + \" \" + \"container-fluid\"\n  }, __jsx(\"nav\", {\n    className: \"jsx-4169290636\"\n  }, __jsx(Nav, null, __jsx(\"img\", {\n    src: \"article-bg.jpg\",\n    alt: \"bg\",\n    className: \"jsx-4169290636\"\n  }))), state && __jsx(React.Fragment, null, __jsx(Author, data), __jsx(ArtContent, {\n    content: data.ArticleContent\n  }), __jsx(About, {\n    linkList: data.ArticleAboutLink,\n    message: data.ArticleAboutIntroduction\n  }), __jsx(Comment, {\n    message: data.comment,\n    id: data._id\n  }), __jsx(Footer, null)), routerStatus && __jsx(\"div\", {\n    className: \"jsx-4169290636\" + \" \" + \"loadAnima\"\n  }, \" \")), __jsx(_JSXStyle, {\n    id: \"1856094829\"\n  }, [\".loadAnima.jsx-4169290636{position:fixed;left:0;top:0;right:0;bottom:0;background:black;-webkit-animation:Loading-jsx-4169290636 2s 10;animation:Loading-jsx-4169290636 2s 10;z-index:9999;}\", \"img.jsx-4169290636{width:100%;height:auto;}\", \"@-webkit-keyframes Loading-jsx-4169290636{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}\", \"@keyframes Loading-jsx-4169290636{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}\"]), __jsx(_JSXStyle, {\n    id: \"2726556104\"\n  }, [\"*,body{margin:0;padding:0;box-sizing:border-box;}\", \"html{font-size:10px;}\", \".container-fluid{padding:0;}\", \".photo img{width:auto;max-width:100%;}\"]));\n};\n\nexport const getServerSideProps = async context => {\n  const RURL = process.env.DATA_URL + \"addArticle/gotArticle/\" + context.query.id;\n  let res = await fetch(RURL);\n  if (res.status === 404) return {\n    props: {\n      data: null\n    }\n  };\n  let result = await res.json();\n  return {\n    props: {\n      data: result\n    }\n  };\n};\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}