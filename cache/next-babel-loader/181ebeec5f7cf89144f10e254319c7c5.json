{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"C:\\\\newlife\\\\newSite\\\\my-app\\\\component\\\\public\\\\getPhoto.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\n\nfunction Photo(_ref) {\n  var id = _ref.id;\n\n  var _useState = useState(null),\n      blob = _useState[0],\n      setBlob = _useState[1];\n\n  var _useState2 = useState(false),\n      uncount = _useState2[0],\n      setUncount = _useState2[1];\n\n  useEffect(function () {\n    getPhoto();\n    return function () {\n      setUncount(true);\n\n      if (blob) {\n        URL.revokeObjectURL(blob);\n      }\n    };\n  }, [id]);\n\n  var getPhoto = function getPhoto() {\n    var QURL, res, result;\n    return _regeneratorRuntime.async(function getPhoto$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            QURL = process.env.DATA_URL + id;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(fetch(QURL));\n\n          case 4:\n            res = _context.sent;\n\n            if (!res.ok) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(res.blob());\n\n          case 8:\n            result = _context.sent;\n\n            if (!uncount) {\n              setBlob(result);\n            }\n\n          case 10:\n            _context.next = 15;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 12]], Promise);\n  };\n\n  return __jsx(React.Fragment, null, blob && __jsx(\"img\", {\n    src: URL.createObjectURL(blob),\n    alt: \"\\u7167\\u7247\",\n    className: \"jsx-3166343992\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 25\n    }\n  }), __jsx(_JSXStyle, {\n    id: \"3166343992\",\n    __self: this\n  }, \"img.jsx-3166343992{width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxuZXdsaWZlXFxuZXdTaXRlXFxteS1hcHBcXGNvbXBvbmVudFxccHVibGljXFxnZXRQaG90by5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtQzBCLEFBR3lDLFdBQ1oiLCJmaWxlIjoiQzpcXG5ld2xpZmVcXG5ld1NpdGVcXG15LWFwcFxcY29tcG9uZW50XFxwdWJsaWNcXGdldFBob3RvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LHt1c2VFZmZlY3QsdXNlU3RhdGV9IGZyb20gJ3JlYWN0J1xyXG5cclxuZnVuY3Rpb24gUGhvdG8oIHsgaWQgfSApIHtcclxuICAgIGNvbnN0IFtibG9iLHNldEJsb2JdID0gdXNlU3RhdGUobnVsbCk7ICAgIFxyXG4gICAgY29uc3QgW3VuY291bnQsc2V0VW5jb3VudF0gPSB1c2VTdGF0ZShmYWxzZSk7ICAgICAgICBcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG5cclxuICAgICAgICAgIGdldFBob3RvKCkgICAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHNldFVuY291bnQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgaWYoYmxvYil7XHJcbiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgICAgICAgIH0gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgfVxyXG4gICAgfSxbaWRdKVxyXG4gICAgY29uc3QgZ2V0UGhvdG8gPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBRVVJMID0gcHJvY2Vzcy5lbnYuREFUQV9VUkwraWQ7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaChRVVJMKVxyXG4gICAgICAgICAgICBpZihyZXMub2spe1xyXG4gICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPWF3YWl0IHJlcy5ibG9iKCk7XHJcbiAgICAgICAgICAgICAgICAgaWYoIXVuY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgc2V0QmxvYihyZXN1bHQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICg8PiBcclxuXHJcbiAgICAgICAgICAgICAgeyBibG9iICYmIDxpbWcgc3JjPXsgVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKX0gYWx0PVwi54Wn54mHXCIvPiB9IFxyXG4gICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7ICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgICAgPC8+KVxyXG4gICAgICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQaG90b1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\newlife\\\\\\\\newSite\\\\\\\\my-app\\\\\\\\component\\\\\\\\public\\\\\\\\getPhoto.js */\"));\n}\n\nexport default Photo;","map":{"version":3,"sources":["C:/newlife/newSite/my-app/component/public/getPhoto.js"],"names":["React","useEffect","useState","Photo","id","blob","setBlob","uncount","setUncount","getPhoto","URL","revokeObjectURL","QURL","process","env","DATA_URL","fetch","res","ok","result","console","log","createObjectURL"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;;AAEA,SAASC,KAAT,OAAyB;AAAA,MAAPC,EAAO,QAAPA,EAAO;;AAAA,kBACEF,QAAQ,CAAC,IAAD,CADV;AAAA,MACdG,IADc;AAAA,MACTC,OADS;;AAAA,mBAEQJ,QAAQ,CAAC,KAAD,CAFhB;AAAA,MAEdK,OAFc;AAAA,MAENC,UAFM;;AAIrBP,EAAAA,SAAS,CAAC,YAAM;AAEVQ,IAAAA,QAAQ;AACR,WAAO,YAAM;AACTD,MAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,UAAGH,IAAH,EAAQ;AACNK,QAAAA,GAAG,CAACC,eAAJ,CAAoBN,IAApB;AACD;AACJ,KALD;AAML,GATQ,EASP,CAACD,EAAD,CATO,CAAT;;AAUA,MAAMK,QAAQ,GAAG,SAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEHG,YAAAA,IAFG,GAEIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,GAAqBX,EAFzB;AAAA;AAAA,6CAGOY,KAAK,CAACJ,IAAD,CAHZ;;AAAA;AAGLK,YAAAA,GAHK;;AAAA,iBAINA,GAAG,CAACC,EAJE;AAAA;AAAA;AAAA;;AAAA;AAAA,6CAKcD,GAAG,CAACZ,IAAJ,EALd;;AAAA;AAKAc,YAAAA,MALA;;AAMJ,gBAAG,CAACZ,OAAJ,EAAa;AACTD,cAAAA,OAAO,CAACa,MAAD,CAAP;AACH;;AARG;AAAA;AAAA;;AAAA;AAAA;AAAA;AAWRC,YAAAA,OAAO,CAACC,GAAR;;AAXQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAgBA,SAAQ,4BAEIhB,IAAI,IAAI;AAAK,IAAA,GAAG,EAAGK,GAAG,CAACY,eAAJ,CAAoBjB,IAApB,CAAX;AAAsC,IAAA,GAAG,EAAC,cAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFZ;AAAA;AAAA;AAAA,4tEAAR;AAUH;;AAED,eAAeF,KAAf","sourcesContent":["import React,{useEffect,useState} from 'react'\r\n\r\nfunction Photo( { id } ) {\r\n    const [blob,setBlob] = useState(null);    \r\n    const [uncount,setUncount] = useState(false);        \r\n\r\n    useEffect(() => {\r\n\r\n          getPhoto()          \r\n          return () => {\r\n              setUncount(true);\r\n              if(blob){\r\n                URL.revokeObjectURL(blob);\r\n              }              \r\n          }\r\n    },[id])\r\n    const getPhoto = async () => {\r\n          try {\r\n            const QURL = process.env.DATA_URL+id;            \r\n            let res = await fetch(QURL)\r\n            if(res.ok){\r\n                 let result =await res.blob();\r\n                 if(!uncount) {\r\n                     setBlob(result);                                      \r\n                 }\r\n            }\r\n          }catch(err){\r\n             console.log(err);\r\n          }\r\n              \r\n    }\r\n\r\n    return (<> \r\n\r\n              { blob && <img src={ URL.createObjectURL(blob)} alt=\"照片\"/> } \r\n              <style jsx>{`\r\n                            img {\r\n                              width:100%;                   \r\n                            }\r\n                `}</style>\r\n          </>)\r\n        \r\n}\r\n\r\nexport default Photo\r\n"]},"metadata":{},"sourceType":"module"}