{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from 'react';\nimport Photo from './photo';\n\nvar ArtContent = function ArtContent(_ref) {\n  var setLinkList = _ref.setLinkList;\n  useEffect(function () {\n    //初次加载文档 检测是否有内容事件\n    var Value = localStorage.getItem('article-content-object');\n\n    if (!Value) {\n      var data = JSON.stringify([{\n        key: 'content-id-1',\n        type: 'text',\n        value: ''\n      }]);\n      localStorage.setItem('article-content-object', data);\n      return;\n    }\n\n    var dataList = JSON.parse(Value);\n    setInitialTextareList(dataList);\n  }, []);\n\n  var _useState = useState([{\n    key: 'content-id-1',\n    type: 'text',\n    value: ''\n  }]),\n      initialTextareList = _useState[0],\n      setInitialTextareList = _useState[1];\n\n  var inputEv = function inputEv(e, index) {\n    //设置文档内容事件        \n    var dom = e.target; // 内容高度自动适应                    \n\n    dom.style.height = dom.scrollHeight > dom.offsetHeight ? dom.scrollHeight + 10 + 'px' : dom.offsetHeight + 'px';\n    var oldValue = localStorage.getItem('article-content-object');\n    if (!oldValue) return;\n    var mianData = JSON.parse(oldValue); // 根据输入的值 更新状态和localstorage！！\n\n    mianData[index].value = e.target.value;\n    localStorage.setItem('article-content-object', JSON.stringify(mianData));\n    setInitialTextareList(mianData);\n  };\n\n  var deleteEv = function deleteEv(index) {\n    //删除掉文章 段落事件\n    var content = initialTextareList.filter(function (item) {\n      return item.type === 'text';\n    });\n    if (content.length === 1) return;\n    var newList = initialTextareList.filter(function (e, Cindex) {\n      return Cindex !== index;\n    });\n    setInitialTextareList(newList);\n    localStorage.setItem('article-content-object', JSON.stringify(newList));\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-2699354276\" + \" \" + 'row Content  mx-0'\n  }, __jsx(AddG, {\n    setList: setInitialTextareList,\n    id: initialTextareList,\n    setLinkList: setLinkList\n  }), __jsx(\"div\", {\n    className: \"jsx-2699354276\" + \" \" + \"col-8 offset-2\"\n  }, initialTextareList.map(function (e, index) {\n    if (e.type === 'text') return __jsx(\"div\", {\n      key: e.key,\n      className: \"jsx-2699354276\" + \" \" + \"row content-item position-relative\"\n    }, __jsx(\"textarea\", {\n      name: \"message\",\n      required: index === 0 ? true : false,\n      value: e.value,\n      onInput: function onInput(e) {\n        return inputEv(e, index);\n      },\n      onChange: function onChange(e) {\n        return inputEv(e, index);\n      },\n      className: \"jsx-2699354276\" + \" \" + 'w-100 px-4'\n    }), __jsx(\"div\", {\n      onClick: function onClick() {\n        return deleteEv(index);\n      },\n      className: \"jsx-2699354276\" + \" \" + \"delete\"\n    }, __jsx(\"i\", {\n      className: \"jsx-2699354276\" + \" \" + 'iconfont icon-trash-'\n    })));\n    if (e.type === 'photo') return __jsx(Photo, {\n      key: e.key,\n      state: initialTextareList,\n      setState: setInitialTextareList,\n      title: e.title,\n      index: index,\n      name: e.key\n    });\n  })), __jsx(_JSXStyle, {\n    id: \"2699354276\"\n  }, [\".Content.jsx-2699354276{margin-top:10rem;border-bottom:2px solid #eaeaea;}\", \".content-item.jsx-2699354276{margin-bottom:5rem;}\", \"textarea.jsx-2699354276{font-size:2.5rem;line-height:2;min-height:40vh;}\", \".delete.jsx-2699354276{position:absolute;right:-50px;top:50%;}\", \".delete.jsx-2699354276 i.jsx-2699354276{background:none;color:black;}\", \".delete.jsx-2699354276 i.jsx-2699354276:hover{background:black;color:white;}\", \"i.jsx-2699354276{color:white;font-size:2rem;padding:0.5rem;background:#3a5999;border-radius:50%;cursor:pointer;}\"]));\n};\n\nvar AddG = React.memo(function (_ref2) {\n  var setList = _ref2.setList,\n      setLinkList = _ref2.setLinkList;\n\n  var addText = function addText() {\n    var oldValue = localStorage.getItem('article-content-object');\n    if (!oldValue) return;\n    var value = JSON.parse(oldValue);\n    value.push({\n      key: 'content-id-' + (value.length + 1),\n      type: 'text',\n      value: ''\n    });\n    var data = JSON.stringify(value);\n    localStorage.setItem('article-content-object', data);\n    setList(value);\n  };\n\n  var addPhoto = function addPhoto() {\n    var oldValue = localStorage.getItem('article-content-object');\n    if (!oldValue) return;\n    var value = JSON.parse(oldValue);\n    value.push({\n      key: 'content-id-' + (value.length + 1),\n      type: 'photo',\n      title: ''\n    });\n    var data = JSON.stringify(value);\n    localStorage.setItem('article-content-object', data);\n    setList(value);\n  };\n\n  var addLink = function addLink() {\n    setLinkList(function (preState) {\n      return [].concat(_toConsumableArray(preState), ['a']);\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-1377131071\" + \" \" + 'addG'\n  }, __jsx(\"ul\", {\n    className: \"jsx-1377131071\"\n  }, __jsx(\"li\", {\n    className: \"jsx-1377131071\"\n  }, __jsx(\"i\", {\n    onClick: addText,\n    className: \"jsx-1377131071\" + \" \" + 'iconfont icon-file-text'\n  })), __jsx(\"li\", {\n    className: \"jsx-1377131071\"\n  }, __jsx(\"i\", {\n    onClick: addPhoto,\n    className: \"jsx-1377131071\" + \" \" + 'iconfont icon-image'\n  })), __jsx(\"li\", {\n    className: \"jsx-1377131071\"\n  }, __jsx(\"i\", {\n    onClick: addLink,\n    className: \"jsx-1377131071\" + \" \" + 'iconfont icon-link'\n  }))), __jsx(_JSXStyle, {\n    id: \"1377131071\"\n  }, [\".addG.jsx-1377131071{position:fixed;top:50%;left:0;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}\", \"li.jsx-1377131071{height:40px;width:40px;background:black;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:1rem 0.5rem;-webkit-transition:.4s;transition:.4s;}\", \"li.jsx-1377131071:hover{-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2);}\", \"i.jsx-1377131071{color:white;font-size:20px;}\"]));\n});\nexport default ArtContent;","map":null,"metadata":{},"sourceType":"module"}