{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useRef } from 'react';\n\nconst MinNav = ({\n  setState,\n  setLoad,\n  setType,\n  list,\n  oldState,\n  setPage\n}) => {\n  let dom = useRef();\n\n  const updateShow = async e => {\n    try {\n      let activeDom = e.target.closest('li');\n      if (!activeDom) return;\n      let oldDom = dom.current;\n      if (oldDom) oldDom.classList.remove('seled');\n      let type = activeDom.children[0].textContent;\n\n      if (type === 'All') {\n        setState(oldState.data);\n        setPage(oldState.count);\n        setType(null);\n        return;\n      }\n\n      activeDom.classList.add('seled'); //选中的元素添加样式            \n\n      dom.current = activeDom;\n      setState([]); //搜索指定文章           \n\n      setLoad(true);\n      let data = await gotData(type);\n\n      if (Array.isArray(data.data)) {\n        setState(data.data);\n        setPage(data.count);\n        setType(type);\n      }\n\n      setLoad(false);\n    } catch (err) {\n      if (err) console.log(err);\n      console.log('列表元素样式切换失败');\n    }\n  };\n\n  const searchEvent = async e => {\n    e.stopPropagation();\n    let actionDom = e.target.closest('li');\n    let searchDom = document.querySelector('i.active');\n\n    if (searchDom) {\n      let dom = document.querySelector('input[name=\"search\"]');\n      let value = dom.value[0].toUpperCase() + dom.value.slice(1);\n      setLoad(true);\n      let data = await gotData(value);\n\n      if (Array.isArray(data.data)) {\n        setState(data.data);\n        setPage(data.count);\n        setType(value);\n        dom.value = '';\n        searchDom.classList.remove('active');\n        actionDom.click();\n      }\n\n      setLoad(false);\n      return;\n    }\n\n    let dom = document.querySelector('.search-input.focus');\n\n    if (dom) {\n      dom.classList.remove('focus');\n      actionDom.classList.remove('seled');\n    } else {\n      dom = document.querySelector('.search-input');\n      dom.classList.add('focus');\n    }\n  };\n\n  const gotData = async type => {\n    try {\n      const RURL = process.env.DATA_URL + 'addArticle/gotArticle/type/' + type + '?page=1';\n      let res = await fetch(RURL);\n      let result = await res.json();\n      return result;\n    } catch (err) {\n      console.log(err);\n      return {\n        err\n      };\n    }\n  };\n\n  const InputSearchEvent = e => {\n    let value = e.target.value;\n    let dom = document.querySelector('.iconfont.icon-search');\n\n    if (value) {\n      dom.classList.add('active');\n    } else {\n      dom.classList.remove('active');\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-269564655\" + \" \" + 'row m-0'\n  }, __jsx(\"div\", {\n    className: \"jsx-269564655\" + \" \" + \"col-12 .col-md-11 min-nav  p-5 pffset-0 \"\n  }, __jsx(\"ul\", {\n    onClick: updateShow,\n    className: \"jsx-269564655\" + \" \" + 'd-flex m-0'\n  }, list.map((type, index) => __jsx(\"li\", {\n    key: index,\n    className: \"jsx-269564655\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-269564655\"\n  }, type))), __jsx(\"li\", {\n    className: \"jsx-269564655\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-269564655\"\n  }, \"All\")), __jsx(\"li\", {\n    onClick: searchEvent,\n    className: \"jsx-269564655\"\n  }, __jsx(\"h3\", {\n    className: \"jsx-269564655\"\n  }, __jsx(\"i\", {\n    className: \"jsx-269564655\" + \" \" + 'iconfont icon-search'\n  })))), __jsx(\"div\", {\n    className: \"jsx-269564655\" + \" \" + \"row  search-input  mx-0\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"search\",\n    placeholder: \"Type\",\n    onInput: InputSearchEvent,\n    className: \"jsx-269564655\"\n  }))), __jsx(_JSXStyle, {\n    id: \"269564655\"\n  }, [\".min-nav.jsx-269564655{color:white;background:black;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);position:relative;}\", \".search-input.jsx-269564655{background:black;position:absolute;top:0;right:-100%;-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%);-webkit-transition:.5s;transition:.5s;padding:2rem 4rem;z-index:20;}\", \".search-input.focus.jsx-269564655{right:15%;}\", \".search-input.jsx-269564655 input.jsx-269564655{width:100%;margin:0 auto;font-size:2.5rem;text-align:center;}\", \"ul.jsx-269564655{list-style:none;}\", \"li.jsx-269564655{-webkit-flex:1;-ms-flex:1;flex:1;cursor:pointer;-webkit-transition:.4s;transition:.4s;text-align:center;}\", \"li.jsx-269564655:hover,li.seled.jsx-269564655{opacity:0.5;-webkit-transform:translateY(-25%);-ms-transform:translateY(-25%);transform:translateY(-25%);}\", \"h3.jsx-269564655{font-size:2.5rem;text-align:center;}\", \"i.jsx-269564655{font-size:2.5rem;}\", \"i.active.jsx-269564655{color:#133d93;}\", \"@media (max-width:980px){.min-nav.jsx-269564655{-webkit-transform:translateY(00%);-ms-transform:translateY(00%);transform:translateY(00%);}}\", \"@media (max-width:1100px){.search-input.jsx-269564655 input.jsx-269564655{font-size:1.2rem;}}\", \"@media (max-width:800px){h3.jsx-269564655{font-size:2rem;}}\", \"@media (max-width:400px){h3.jsx-269564655{font-size:1rem;}}\"]));\n};\n\nexport default MinNav;","map":null,"metadata":{},"sourceType":"module"}