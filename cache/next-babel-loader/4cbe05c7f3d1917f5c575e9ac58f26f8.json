{"ast":null,"code":"var _jsxFileName = \"C:\\\\newlife\\\\newSite\\\\my-app\\\\component\\\\public\\\\getPhoto.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\n\nfunction Photo({\n  id\n}) {\n  const {\n    0: blob,\n    1: setBlob\n  } = useState(null);\n  const {\n    0: uncount,\n    1: setUncount\n  } = useState(false);\n  useEffect(() => {\n    getPhoto();\n    return () => {\n      setUncount(true);\n\n      if (blob) {\n        URL.revokeObjectURL(blob);\n      }\n    };\n  }, [id]);\n\n  const getPhoto = async () => {\n    try {\n      const QURL = process.env.DATA_URL + id;\n      let res = await fetch(QURL);\n\n      if (res.ok) {\n        let result = await res.blob();\n\n        if (!uncount) {\n          setBlob(result);\n        }\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(React.Fragment, null, blob && __jsx(\"img\", {\n    src: URL.createObjectURL(blob),\n    alt: \"\\u7167\\u7247\",\n    className: \"jsx-3162327209\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 16\n    }\n  }), __jsx(_JSXStyle, {\n    id: \"3162327209\",\n    __self: this\n  }, \"img.jsx-3162327209{width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxuZXdsaWZlXFxuZXdTaXRlXFxteS1hcHBcXGNvbXBvbmVudFxccHVibGljXFxnZXRQaG90by5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQ2tCLEFBR3NCLFdBQ2IiLCJmaWxlIjoiQzpcXG5ld2xpZmVcXG5ld1NpdGVcXG15LWFwcFxcY29tcG9uZW50XFxwdWJsaWNcXGdldFBob3RvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmZ1bmN0aW9uIFBob3RvKHsgaWQgfSkge1xyXG4gIGNvbnN0IFtibG9iLCBzZXRCbG9iXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFt1bmNvdW50LCBzZXRVbmNvdW50XSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGdldFBob3RvKCk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBzZXRVbmNvdW50KHRydWUpO1xyXG4gICAgICBpZiAoYmxvYikge1xyXG4gICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW2lkXSk7XHJcbiAgY29uc3QgZ2V0UGhvdG8gPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBRVVJMID0gcHJvY2Vzcy5lbnYuREFUQV9VUkwgKyBpZDtcclxuICAgICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKFFVUkwpO1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHJlcy5ibG9iKCk7XHJcbiAgICAgICAgaWYgKCF1bmNvdW50KSB7XHJcbiAgICAgICAgICBzZXRCbG9iKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPD5cclxuICAgICAge2Jsb2IgJiYgPGltZyBzcmM9e1VSTC5jcmVhdGVPYmplY3RVUkwoYmxvYil9IGFsdD1cIueFp+eJh1wiIC8+fVxyXG4gICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgaW1nIHtcclxuICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgIH1cclxuICAgICAgYH08L3N0eWxlPlxyXG4gICAgPC8+XHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGhvdG87XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\newlife\\\\\\\\newSite\\\\\\\\my-app\\\\\\\\component\\\\\\\\public\\\\\\\\getPhoto.js */\"));\n}\n\nexport default Photo;","map":{"version":3,"sources":["C:/newlife/newSite/my-app/component/public/getPhoto.js"],"names":["React","useEffect","useState","Photo","id","blob","setBlob","uncount","setUncount","getPhoto","URL","revokeObjectURL","QURL","process","env","DATA_URL","res","fetch","ok","result","err","console","log","createObjectURL"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;AAEA,SAASC,KAAT,CAAe;AAAEC,EAAAA;AAAF,CAAf,EAAuB;AACrB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBJ,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM;AAAA,OAACK,OAAD;AAAA,OAAUC;AAAV,MAAwBN,QAAQ,CAAC,KAAD,CAAtC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,QAAQ;AACR,WAAO,MAAM;AACXD,MAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,UAAIH,IAAJ,EAAU;AACRK,QAAAA,GAAG,CAACC,eAAJ,CAAoBN,IAApB;AACD;AACF,KALD;AAMD,GARQ,EAQN,CAACD,EAAD,CARM,CAAT;;AASA,QAAMK,QAAQ,GAAG,YAAY;AAC3B,QAAI;AACF,YAAMG,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,GAAuBX,EAApC;AACA,UAAIY,GAAG,GAAG,MAAMC,KAAK,CAACL,IAAD,CAArB;;AACA,UAAII,GAAG,CAACE,EAAR,EAAY;AACV,YAAIC,MAAM,GAAG,MAAMH,GAAG,CAACX,IAAJ,EAAnB;;AACA,YAAI,CAACE,OAAL,EAAc;AACZD,UAAAA,OAAO,CAACa,MAAD,CAAP;AACD;AACF;AACF,KATD,CASE,OAAOC,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,GAbD;;AAeA,SACE,4BACGf,IAAI,IAAI;AAAK,IAAA,GAAG,EAAEK,GAAG,CAACa,eAAJ,CAAoBlB,IAApB,CAAV;AAAqC,IAAA,GAAG,EAAC,cAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADX;AAAA;AAAA;AAAA,4wDADF;AAUD;;AAED,eAAeF,KAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nfunction Photo({ id }) {\r\n  const [blob, setBlob] = useState(null);\r\n  const [uncount, setUncount] = useState(false);\r\n\r\n  useEffect(() => {\r\n    getPhoto();\r\n    return () => {\r\n      setUncount(true);\r\n      if (blob) {\r\n        URL.revokeObjectURL(blob);\r\n      }\r\n    };\r\n  }, [id]);\r\n  const getPhoto = async () => {\r\n    try {\r\n      const QURL = process.env.DATA_URL + id;\r\n      let res = await fetch(QURL);\r\n      if (res.ok) {\r\n        let result = await res.blob();\r\n        if (!uncount) {\r\n          setBlob(result);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {blob && <img src={URL.createObjectURL(blob)} alt=\"照片\" />}\r\n      <style jsx>{`\r\n        img {\r\n          width: 100%;\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Photo;\r\n"]},"metadata":{},"sourceType":"module"}