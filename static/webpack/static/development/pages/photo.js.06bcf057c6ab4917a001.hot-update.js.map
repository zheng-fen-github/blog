{"version":3,"file":"static/webpack/static\\development\\pages\\photo.js.06bcf057c6ab4917a001.hot-update.js","sources":["webpack:///./pages/photo.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport Head from \"next/head\";\r\nimport Nav from \"../component/public/nav\";\r\nimport MinNav from \"../component/photo/min-nav\";\r\nimport Item from \"../component/photo/item\";\r\nimport fetch from \"node-fetch\";\r\nimport Router from \"next/router\";\r\n\r\nconst Photo = ({ data }) => {\r\n  const [showData, setshowData] = useState(data);\r\n  const AllData = useRef();\r\n  AllData.current = data;\r\n  const filterEvent = (value) => {\r\n    console.log(value);\r\n    if (value == 0) return setshowData(AllData.current);\r\n    if (value == 1) {\r\n    }\r\n    let newData = AllData.current.filter((e) => {\r\n      let PhotoTime = +new Date(Number(e.createTime));\r\n      let liveTime = Date.now();\r\n      if (liveTime - PhotoTime >= 1000 * 60 * 60 * 24 * value) {\r\n        return e;\r\n      }\r\n    });\r\n    setshowData(newData);\r\n  };\r\n  const [routerStatus, setRouterStatus] = useState(false); // 路由变化事件\r\n  const handleRouteChange = (url) => {\r\n    setRouterStatus(true);\r\n  };\r\n  Router.events.on(\"routeChangeStart\", handleRouteChange);\r\n\r\n  const fontsizeEvent = () => {\r\n    let style = document.documentElement.style;\r\n    if (window.innerWidth < 960) {\r\n      style.fontSize = \"6px\";\r\n    } else {\r\n      style.fontSize = \"10px\";\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    fontsizeEvent();\r\n    window.addEventListener(\"resize\", () => {\r\n      fontsizeEvent();\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Photo</title>\r\n        <link\r\n          rel=\"stylesheet\"\r\n          href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css\"\r\n          integrity=\"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh\"\r\n          crossorigin=\"anonymous\"\r\n        ></link>\r\n        <link\r\n          rel=\"stylesheet\"\r\n          href=\"//at.alicdn.com/t/font_1748919_jonwjrvk6jq.css\"\r\n        />\r\n        <title> 图片收藏 </title>\r\n      </Head>\r\n      <div className=\"container-fluid\">\r\n        <nav>\r\n          <Nav>\r\n            <img src=\"photo-bg.jpg\" alt=\"bg\" />\r\n          </Nav>\r\n        </nav>\r\n        {showData.map((e) => (\r\n          <Item key={e._id} {...e} />\r\n        ))}\r\n        {showData.length === 0 && (\r\n          <h1 className=\"text-center mt-5\"> 没有相关内容 </h1>\r\n        )}\r\n        {/* <MinNav filter={filterEvent} /> */}\r\n\r\n        {routerStatus && (\r\n          <div className=\"loadAnima\"> {/*  路由变化时 提示动画 */}</div>\r\n        )}\r\n      </div>\r\n\r\n      <style jsx global>{`\r\n        *,\r\n        body {\r\n          margin: 0;\r\n          padding: 0;\r\n          box-sizing: border-box;\r\n        }\r\n        html {\r\n          font-size: 10px;\r\n        }\r\n        img {\r\n          width: 100%;\r\n          height: auto;\r\n        }\r\n        .container-fluid {\r\n          padding: 0;\r\n        }\r\n      `}</style>\r\n      <style jsx>\r\n        {`\r\n          img {\r\n            width: 100%;\r\n            height: auto;\r\n          }\r\n          .loadAnima {\r\n            position: fixed;\r\n            left: 0;\r\n            top: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            background: black;\r\n            animation: Loading 2s 10;\r\n            z-index: 9999;\r\n          }\r\n          @keyframes Loading {\r\n            0% {\r\n              opacity: 0;\r\n            }\r\n            50% {\r\n              opacity: 1;\r\n            }\r\n            100% {\r\n              opacity: 0;\r\n            }\r\n          }\r\n        `}\r\n      </style>\r\n    </>\r\n  );\r\n};\r\nexport async function getServerSideProps() {\r\n  const RURL = process.env.DATA_URL + \"addphoto/photos\";\r\n  let req = await fetch(RURL);\r\n  let data = await req.json();\r\n  return {\r\n    props: { data },\r\n  };\r\n}\r\nexport default Photo;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;AAAA;AACA;AACA;AAiBA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmFA;AACA;;AAQA;;;;A","sourceRoot":""}