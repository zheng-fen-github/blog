{"version":3,"file":"static/webpack/static\\development\\pages\\article.js.01a63920ca8d112c3862.hot-update.js","sources":["webpack:///./component/article/comment.js","webpack:///./component/article/domList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport CommentList from \"./domList\";\r\n\r\nconst Comment = ({ message, id }) => {\r\n  useEffect(() => {\r\n    //获取用户信息\r\n    let userId = localStorage.getItem(\"user-id\");\r\n    let userName = localStorage.getItem(\"user-name\");\r\n    if (!userId) {\r\n      userId = \"youke\" + Date.now();\r\n      localStorage.setItem(\"user-id\", userId);\r\n    }\r\n    if (!userName) {\r\n      userName = \"游客\" + String(Date.now()).slice(-5);\r\n      localStorage.setItem(\"user-name\", userName);\r\n    }\r\n    setUserName(userName);\r\n  }, []);\r\n  const [userName, setUserName] = useState(null);\r\n  const changeUserName = (e) => {\r\n    //用户自定义名字\r\n    let value = e.target.value;\r\n    setUserName(value);\r\n    localStorage.setItem(\"user-name\", value);\r\n  };\r\n\r\n  const submitEvent = async (e) => {\r\n    //提交事件\r\n    try {\r\n      e.preventDefault();\r\n      let data = new FormData(e.target);\r\n      const QURL = process.env.DATA_URL + \"addArticle/articleComment/\" + id;\r\n      let res = await fetch(QURL, {\r\n        method: \"POST\",\r\n        body: data,\r\n      });\r\n      if (res.ok) {\r\n        let result = await res.json();\r\n        setState(result);\r\n      } else {\r\n        alert(\"添加出错，服务器去看妹子了。\");\r\n        console.log(error);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const inputAutoHeight = (e) => {\r\n    let dom = e.target; // 内容高度自动适应\r\n    dom.style.height =\r\n      dom.scrollHeight > dom.offsetHeight\r\n        ? dom.scrollHeight + 10 + \"px\"\r\n        : dom.offsetHeight + \"px\";\r\n  };\r\n\r\n  const [state, setState] = useState(message.slice(0, 3)); //评论列表\r\n\r\n  //   let domList = state.map((item) => (\r\n  //     <div className=\"col-12\" key={item.createTime}>\r\n  //       <div className=\"row\">\r\n  //         <h3>{item.username + \" : \" + item.message}</h3>\r\n  //       </div>\r\n  //     </div>\r\n  //   ));\r\n  return (\r\n    <form\r\n      className=\"row comment m-0 p-0 justify-content-center\"\r\n      onSubmit={submitEvent}\r\n    >\r\n      <div className=\"col-10 col-lg-8 \">\r\n        <div className=\"row justify-content-between \">\r\n          <h2 className=\"comment-item m-0 py-3\">{message.length} Comments</h2>\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={userName ? userName : \"\"}\r\n            onInput={changeUserName}\r\n            onChange={changeUserName}\r\n            id=\"username\"\r\n            className=\"px-4 usename text-center\"\r\n          />\r\n        </div>\r\n        <div className=\"row mt-5 align-items-center\">\r\n          <img src=\"images/site_05.jpg\" className=\"col-auto\" alt=\"\" />\r\n          <textarea\r\n            type=\"text\"\r\n            name=\"message\"\r\n            id=\"comment\"\r\n            className=\"col px-4 py-2\"\r\n            onInput={inputAutoHeight}\r\n          />\r\n          <button type=\"submit\">\r\n            <i className=\"iconfont icon-cloud-upload col-auto\"></i>\r\n          </button>\r\n        </div>\r\n        <div\r\n          className=\"row comment-list justify-content-center align-items-center position-relative\"\r\n          style={{ padding: \"20px 80px\" }}\r\n        >\r\n          {message.length > 0 ? (\r\n            <CommentList />\r\n          ) : (\r\n            <h3> Be the first to comment。 </h3>\r\n          )}\r\n          <h4\r\n            className=\"position-absolute look-more\"\r\n            onClick={() => setState(message)}\r\n          >\r\n            look more\r\n          </h4>\r\n        </div>\r\n      </div>\r\n      <style jsx>\r\n        {`\r\n          .comment {\r\n            padding: 10rem 0;\r\n          }\r\n          h2 {\r\n            font-weight: 700;\r\n          }\r\n          .look-more {\r\n            right: 70px;\r\n            top: 10px;\r\n            color: #007bff;\r\n            cursor: pointer;\r\n          }\r\n          i {\r\n            font-size: 40px;\r\n            cursor: pointer;\r\n            transition: 0.2s;\r\n          }\r\n          i:hover {\r\n            color: #007bff;\r\n          }\r\n          .col-8 > .row:nth-child(1) {\r\n            border-bottom: 2px solid #eaeaea;\r\n          }\r\n          img {\r\n            height: 40px;\r\n            border-radius: 50%;\r\n          }\r\n          .comment-item {\r\n            border-bottom: 2px solid black;\r\n            position: relative;\r\n            top: 2px;\r\n          }\r\n          .comment-list {\r\n            min-height: 20vh;\r\n            border-bottom: 2px solid #eaeaea;\r\n          }\r\n          input,\r\n          textarea {\r\n            font-size: 2rem;\r\n            font-weight: 500;\r\n          }\r\n\r\n          input[name=\"username\"] {\r\n            border: none;\r\n          }\r\n          button {\r\n            background: none;\r\n            border: none;\r\n          }\r\n        `}\r\n      </style>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React from \"react\";\r\n\r\nconst DomList = ({ list }) => (\r\n  <>\r\n    {list.map((com) => (\r\n      <div className=\"col-12\" key={com.createTime}>\r\n        <div className=\"row\">\r\n          <h3>{com.username + \" : \" + com.message}</h3>\r\n        </div>\r\n      </div>\r\n    ))}\r\n  </>\r\n);\r\n\r\nexport default DomList;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAfA;AAAA;AAAA;AACA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AALA;AAAA;AAOA;AACA;AAFA;AACA;AAPA;AAMA;AACA;AAPA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAWA;AACA;AAZA;AAAA;AACA;AADA;AAcA;AACA;AACA;AAhBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAkBA;AACA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAoBA;AACA;AACA;AAAA;AAIA;AACA;AAnDA;AAAA;AAAA;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAvCA;AAAA;AAAA;AAsGA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzKA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAFA;AACA;AAWA;;;;A","sourceRoot":""}